
"use strict"




const path      = require('path')
const utils     = require('pdir/commons/utils')
const constants = require('pdir/commons/constants')





const pdir = rawArgs => {

	const args = pdir.preprocess(rawArgs)

	args.dirs.forEach(dir => {
		utils.fs.listContent(dir, content => {

			const types = utils.fs.emitFileTypes(content)

			types.on(constants.events.file, filePath => {
				console.log(filePath)
			})

		})
	})

}

pdir.preprocess = rawArgs => {

	return {
		dryRun: rawArgs['--dry-run'],
		dirs:   pdir.preprocess.dirs(rawArgs.DIR)
	}

}

pdir.preprocess.dirs = dirs => {

	return dirs.map(dir => {
		return path.resolve(process.cwd( ), dir)
	})

}





module.exports = pdir
